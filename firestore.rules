/**
 * @fileoverview Firestore Security Rules for the canteen ordering system.
 *
 * Core Philosophy:
 * This ruleset prioritizes simplicity, scalability and security. The design assumes no specific authorization context (e.g., user roles) is required.  Write access to menu items and orders is completely forbidden. Read access is public.
 *
 * Data Structure:
 * - /menu_items/{menuItemId}: Stores menu items.
 * - /orders/{orderId}: Stores orders.
 * - /orders/{orderId}/order_items/{orderItemId}: Stores individual order items.
 *
 * Key Security Decisions:
 * - Menu items and orders are publicly readable, but write access is denied.
 * - No user-specific data or roles are used in this version.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Grants public read access to menu items, but denies all write access.
     * @path /menu_items/{menuItemId}
     * @allow get, list: Anyone can read menu items.
     * @deny create, update, delete: No one can create, update, or delete menu items.
     * @principle Menu items are publicly readable and not user-modifiable.
     */
    match /menu_items/{menuItemId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Grants public read access to orders, but denies all write access.
     * @path /orders/{orderId}
     * @allow get, list: Anyone can read orders.
     * @deny create, update, delete: No one can create, update, or delete orders.
     * @principle Orders are publicly readable and not user-modifiable.
     */
    match /orders/{orderId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Grants public read access to order items, but denies all write access.
     * @path /orders/{orderId}/order_items/{orderItemId}
     * @allow get, list: Anyone can read order items.
     * @deny create, update, delete: No one can create, update, or delete order items.
     * @principle Order items are publicly readable and not user-modifiable.
     */
    match /orders/{orderId}/order_items/{orderItemId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
  }
}