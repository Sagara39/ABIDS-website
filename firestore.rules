/**
 * @fileoverview Firestore Security Rules for the college canteen ordering system.
 *
 * Core Philosophy:
 * This ruleset prioritizes simplicity and security. It uses a public-read, owner-write model for menu items,
 * and restricts access to orders and order items.
 *
 * Data Structure:
 * - /menuItems/{menuItemId}: Publicly readable collection of menu items.
 * - /orders/{orderId}: Collection of orders, access is restricted.
 * - /orderItems/{orderItemId}: Collection of order items, access is restricted.
 *
 * Key Security Decisions:
 * - Menu items are publicly readable to all users, including unauthenticated users. Only admins can modify menu items (not implemented in this version).
 * - Listing of orders or orderItems is not explicitly allowed.
 *
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Grants public read access to menu items, but restricts write access.
     * @path /menuItems/{menuItemId}
     * @allow (get, list): Any user, including unauthenticated users, can read menu items.
     * @deny (create, update, delete): No one can create, update, or delete menu items in this version.
     * @principle Public read, restricted write access for menu items.
     */
    match /menuItems/{menuItemId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Restricts access to orders. No one can create, read, update, list, or delete orders in this version.
     * @path /orders/{orderId}
     * @allow None in this version.
     * @deny All requests.
     * @principle Access to orders is strictly controlled.
     */
    match /orders/{orderId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Restricts access to order items. No one can create, read, update, list, or delete order items in this version.
     * @path /orderItems/{orderItemId}
     * @allow None in this version.
     * @deny All requests.
     * @principle Access to order items is strictly controlled.
     */
    match /orderItems/{orderItemId} {
      allow get, list, create, update, delete: if false;
    }
  }
}